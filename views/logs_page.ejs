<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>B·∫£ng th·ªëng k√™ h·ªá th·ªëng</title>

    <link rel="stylesheet" href="/CSS/logs_pages.css">
</head>
<body>

    <h1 class="logs-title">B·∫¢NG TH·ªêNG K√ä H·ªÜ TH·ªêNG</h1>

    <!-- FORM L·ªåC THEO NG√ÄY -->
    <form class="filter-form" method="get" action="/logs">
        <label for="date" style="color: rgb(192, 233, 9);">Xem theo ng√†y:</label>
        <input
            type="date"
            id="date"
            name="date"
            value="<%= selectedDate || '' %>"
        >
        <button type="submit">L·ªçc</button>

        <% if (selectedDate) { %>
            <a href="/logs" class="clear-filter">X√≥a l·ªçc</a>
        <% } %>
    </form>

    <a href="/" class="back-btn">‚Üê Tr·ªü v·ªÅ m√†n h√¨nh ch√≠nh</a>

    <!-- ===== B·∫¢NG A ‚Äì L·ªãch s·ª≠ gi√° tr·ªã tag ===== -->
    <div class="table-container">
        <div class="table-title">üìò B·∫¢NG A ‚Äì L·ªãch s·ª≠ gi√° tr·ªã tag</div>

        <div class="table-wrapper">
            <table class="table">
                <thead>
                    <tr>
                        <th>Th·ªùi gian</th>
                        <th>BTT_AUTO</th>
                        <th>BTT_MANUAL</th>
                        <th>START_DC1</th>
                        <th>STOP_DC1</th>
                        <th>START_DC2</th>
                        <th>STOP_DC2</th>
                        <th>AUTO_START</th>
                        <th>AUTO_STOP</th>
                        <th>SP_DC1</th>
                        <th>SP_DC2</th>
                        <th>SP_VAI_REF</th>
                        <th>FAULT</th>
                        <th>FAULT_ALL</th>
                    </tr>
                </thead>
                <tbody>
                    <% history.forEach(row => { %>
                        <tr>
                            <td><%= row.ts %></td>
                            <td><%= row.BTT_AUTO %></td>
                            <td><%= row.BTT_MANUAL %></td>
                            <td><%= row.MANUAL_START_DC_1 %></td>
                            <td><%= row.MANUAL_STOP_DC1 %></td>
                            <td><%= row.MANUAL_START_DC_2 %></td>
                            <td><%= row.MANUAL_STOP_DC2 %></td>
                            <td><%= row.AUTO_START %></td>
                            <td><%= row.AUTO_STOP %></td>
                            <td><%= row.SP_DC1 %></td>
                            <td><%= row.SP_DC2 %></td>
                            <td><%= row.SP_VAI_REF %></td>
                            <td><%= row.SS_FAULT %></td>
                            <td><%= row.FAULT_ALL %></td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>

    <!-- ===== B·∫¢NG B ‚Äì L·ªãch s·ª≠ s·ª± ki·ªán ===== -->
    <div class="table-container">
        <div class="table-title">üìô B·∫¢NG B ‚Äì L·ªãch s·ª≠ h√†nh ƒë·ªông (Event log)</div>

        <div class="table-wrapper small">
            <table class="table">
                <thead>
                    <tr>
                        <th>Th·ªùi gian</th>
                        <th>S·ª± ki·ªán</th>
                    </tr>
                </thead>
                <tbody>
                    <% events.forEach(e => { %>
                        <tr>
                            <td><%= e.ts %></td>
                            <td class="event-text"><%= e.event_text %></td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>

</body>
</html>
